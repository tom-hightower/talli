(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e){e.exports={Global:{hostURL:"tallivote.com",entryQRPrefix:"entry//",signInUrl:"https://accounts.google.com/o/oauth2/v2/auth?access_type=offline&prompt=consent&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.me%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&response_type=code&client_id=1061225539650-cp3lrdn3p1u49tsq320l648hcuvg8plb.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fgoogle-auth"}}},111:function(e,t,n){},14:function(e,t,n){var a=n(496);a.initializeApp({apiKey:"AIzaSyAJdDmQLsBBoxMKV0GYrhYIpWfsSvptytw",authDomain:"talli-9582a.firebaseapp.com",databaseURL:"https://talli-9582a.firebaseio.com",projectId:"talli-9582a",storageBucket:"talli-9582a.appspot.com",messagingSenderId:"637663865216"}),e.exports=a},249:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){e.exports=n.p+"static/media/logo.6276622d.svg"},331:function(e,t,n){e.exports=n(629)},339:function(e,t,n){},340:function(e,t,n){},495:function(e,t,n){},573:function(e,t){},576:function(e,t,n){},581:function(e,t,n){},598:function(e,t,n){},600:function(e,t){},602:function(e,t){},628:function(e,t,n){},629:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(25),o=n.n(l),i=(n(339),n(5)),s=n(4),c=n(8),u=n(6),d=n(7),h=n(122),m=n.n(h),p=n(120),v=n.n(p),E=n(71),f=n.n(E),g=n(39),b=n.n(g),y=n(263),C=n.n(y),O=n(123),k=n.n(O),j=n(175),D=n.n(j),I=n(174),w=n.n(I),S=n(264),V=n.n(S),N=n(1),T=(n(340),n(261)),A=n.n(T),x=n(37);function R(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toGMTString();document.cookie=e+"="+t+"; "+r}function F(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var a=t[n].split("=");if(a[0]===e)return a[1]}return""}function z(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var q=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:z,onClose:this.handleClose},r.a.createElement(N.h,null,"Help/About"),r.a.createElement(N.g,null,r.a.createElement("b",null,"Help:"),r.a.createElement("br",null),"Choose to vote as an event attendee or login to the event organizer dashboard to begin.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"About:"),r.a.createElement("br",null),"Talli is a portable voting platform built to streamline popular voting at events."),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Ok"))))}}]),t}(r.a.Component);function B(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:B,onClose:this.handleClose},r.a.createElement(N.h,null,"Cookies Required"),r.a.createElement(N.g,null,"Before you can vote, you ",r.a.createElement("b",null,"must consent")," to the use of cookies."),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Close"))))}}]),t}(r.a.Component),L=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleDrawer=function(){return n.setState({open:!n.state.open})},n.closeDrawer=function(){return n.setState({open:!1})},n.onSuccess=function(e){n.props.onSuccess(e),n.ChangeView("/organizer")},n.onFailure=function(){console.log("Failed to Login")},n.state={open:!1},n.helpChild=r.a.createRef(),n.warningChild=r.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"ChangeView",value:function(e){var t=F("TalliConsent");"/vote"===e&&""===t?this.warningChild.current.handleOpen():Object(x.navigate)(e)}},{key:"logout",value:function(e){this.ChangeView(e),this.props.logout()}},{key:"render",value:function(){var e=this,t=this.props.loggedIn?r.a.createElement(N.n,{button:!0,key:"Organizer Logout",onClick:function(){return e.logout("/")}},r.a.createElement(N.o,null,r.a.createElement(w.a,null)),r.a.createElement(N.p,{primary:"Organizer Logout"})):r.a.createElement(h.GoogleLogin,{clientId:"1061225539650-cp3lrdn3p1u49tsq320l648hcuvg8plb.apps.googleusercontent.com",render:function(e){return r.a.createElement(N.n,{button:!0,key:"Organizer Login",onClick:e.onClick},r.a.createElement(N.o,null,r.a.createElement(w.a,null)),r.a.createElement(N.p,{primary:"Organizer Login"}))},onSuccess:this.onSuccess.bind(this),onFailure:this.onFailure.bind(this)});return r.a.createElement("div",{className:"root"},r.a.createElement(v.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(b.a,{className:"menuButton",color:"inherit","aria-label":"Menu",onClick:this.toggleDrawer},r.a.createElement(C.a,null)),r.a.createElement("img",{src:A.a,className:"navTitle",alt:"talli"}))),r.a.createElement(N.j,{open:this.state.open,onClose:this.closeDrawer},r.a.createElement("div",{tabIndex:0,role:"button",onClick:this.closeDrawer},r.a.createElement("div",{width:"250"},r.a.createElement(N.n,{button:!0,key:"Home",onClick:function(){return e.logout("/")}},r.a.createElement(N.o,null,r.a.createElement(k.a,null)),r.a.createElement(N.p,{primary:"Home"})),r.a.createElement(N.n,{button:!0,key:"Vote",onClick:function(){return e.logout("/vote")}},r.a.createElement(N.o,null,r.a.createElement(V.a,null)),r.a.createElement(N.p,{primary:"Vote"})),t,r.a.createElement(N.i,null),r.a.createElement(N.n,{button:!0,key:"Help",onClick:function(){return e.helpChild.current.handleOpen()}},r.a.createElement(N.o,null,r.a.createElement(D.a,null)),r.a.createElement(N.p,{primary:"Help"})),r.a.createElement(N.n,{button:!0,key:"Cookies",onClick:function(){return e.ChangeView("/cookies")}},r.a.createElement(N.o,null,r.a.createElement(D.a,null)),r.a.createElement(N.p,{primary:"Cookies"}))))),r.a.createElement(q,{ref:this.helpChild}),r.a.createElement(P,{ref:this.warningChild}))}}]),t}(r.a.Component),M=n(26),U=n(72),G=Object(M.createMuiTheme)({palette:{primary:U.lightBlue,secondary:U.green,error:U.red},typography:{h4:{fontWeight:500,fontSize:30},h5:{fontSize:25}}}),_=n(265),W=n.n(_),H=(n(495),n(14)),J=n.n(H),Q=n(40),Y=n.n(Q),K=(n(249),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},n.handleClose=function(){""===F("TalliConsent")&&R("TalliConsent",!0,30),n.setState({open:!1})},n.goToLink=function(){n.props.nav("/cookies")},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(N.q,{direction:"up",in:this.state.open,mountOnEnter:!0,unmountOnExit:!0},r.a.createElement(N.b,{className:"cookieConsent",elevation:16},r.a.createElement(N.d,{id:"cc_content"},"This website uses\xa0",r.a.createElement("span",{id:"link",onClick:function(){return e.goToLink()}},r.a.createElement("u",null,"cookies")),"\xa0to ensure you get the best experience on our website."),r.a.createElement(N.c,{id:"cc_confirm"},r.a.createElement(N.a,{size:"small",variant:"contained",color:"default",onClick:function(){return e.handleClose()}},"Got it!")))))}}]),t}(r.a.Component)),Z=Y()("http://localhost:5000"),$=n(110).Global.signInUrl;Z.on("send_url",function(e){$=e});var X=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).gaveConsent=function(){return""!==F("TalliConsent")},n.state={url:$},n.helpChild=r.a.createRef(),n.warningChild=r.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"ChangeView",value:function(e){Object(x.navigate)(e)}},{key:"GetCookies",value:function(e){var t=F("UserID");if(""===F("TalliConsent"))this.warningChild.current.handleOpen();else{if(""===t){var n=""+Math.random().toString(36).substr(2,9);R("UserID",n,30),J.a.database().ref("cookies").child(n).set(n)}Object(x.navigate)(e)}}}]),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"content"},r.a.createElement("br",null),r.a.createElement(q,{ref:this.helpChild}),r.a.createElement(P,{ref:this.warningChild}),r.a.createElement(N.t,{variant:"h4",align:"center",gutterBottom:!0},"Welcome to Talli!"),r.a.createElement(N.l,{container:!0,justify:"center"},r.a.createElement("div",{className:"buttons"},r.a.createElement(N.n,null,r.a.createElement(N.a,{variant:"contained",color:"secondary",className:"buttons",onClick:function(){return e.GetCookies("/vote")}},"Vote as an Event Attendee")),r.a.createElement(N.n,null,r.a.createElement(m.a,{clientId:"1061225539650-cp3lrdn3p1u49tsq320l648hcuvg8plb.apps.googleusercontent.com",render:function(e){return r.a.createElement(N.a,{variant:"contained",color:"primary",className:"buttons",onClick:e.onClick},"Login as an Event Organizer")},onSuccess:this.onSuccess.bind(this),onFailure:this.onFailure.bind(this)})))),r.a.createElement("div",{className:"links"},r.a.createElement(N.t,{variant:"body2",id:"aboutLink",onClick:function(){return e.helpChild.current.handleOpen()}},r.a.createElement("u",null,"About Talli"))),r.a.createElement("br",null),!this.gaveConsent()&&r.a.createElement(K,{nav:this.ChangeView}))}},{key:"onSuccess",value:function(e){this.props.onSuccess(e),this.ChangeView("/organizer")}},{key:"onFailure",value:function(){console.log("Login failed")}}]),t}(r.a.Component),ee=n(16),te=n(89),ne=n(266),ae=n.n(ne),re=n(50),le=n.n(re),oe=n(267),ie=n.n(oe);n(111);function se(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var ce=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"SubmitRankings",value:function(){var e=F("UserID"),t=J.a.database().ref("attendees/".concat(e));t.child("currentEvent").set(""),t.child("pastEvents/".concat(this.props.eventID,"/")).set(this.props.eventID),this.props.handler()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:se,onClose:this.handleClose},r.a.createElement(N.h,null,"Confirm Submission"),r.a.createElement(N.g,null,"You may only submit your rankings for this event ",r.a.createElement("b",null,"once."),r.a.createElement("br",null),r.a.createElement("br",null),"Would you like to continue?"),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose},"Go Back"),r.a.createElement(N.a,{onClick:function(){return e.SubmitRankings()},color:"primary"},"Confirm"))))}}]),t}(r.a.Component),ue=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={days:0,hours:0,min:0,sec:0},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.calculateCountdown(this.props.date);t?this.setState(t):this.finish(),this.interval=setInterval(function(){var t=e.calculateCountdown(e.props.date);t?e.setState(t):e.finish()},1e3)}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"calculateCountdown",value:function(e){var t=(Date.parse(new Date(e))-Date.parse(new Date))/1e3;if(t<=0)return!1;var n={years:0,days:0,hours:0,min:0,sec:0,millisec:0};return t>=31557600&&(n.years=Math.floor(t/31557600),t-=365.25*n.years*86400),t>=86400&&(n.days=Math.floor(t/86400),t-=86400*n.days),t>=3600&&(n.hours=Math.floor(t/3600),t-=3600*n.hours),t>=60&&(n.min=Math.floor(t/60),t-=60*n.min),n.sec=t,n}},{key:"stop",value:function(){clearInterval(this.interval)}},{key:"finish",value:function(){clearInterval(this.interval),this.props.onFinished()}},{key:"addLeadingZeros",value:function(e){for(var t=String(e);t.length<2;)t="0".concat(t);return t}},{key:"render",value:function(){var e,t=this.state;return e=t.days>7?r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,this.addLeadingZeros(t.days)),r.a.createElement("span",null," Days")):t.days>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,this.addLeadingZeros(t.days)),r.a.createElement("span",null,1===t.days?" Day, ":" Days, "),r.a.createElement("strong",null,this.addLeadingZeros(t.hours)),r.a.createElement("span",null,"Hours")):t.hours>1?r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,this.addLeadingZeros(t.hours)),r.a.createElement("span",null," Hours, "),r.a.createElement("strong",null,this.addLeadingZeros(t.min)),r.a.createElement("span",null," Min")):r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,this.addLeadingZeros(t.min)),r.a.createElement("span",null," Min, "),r.a.createElement("strong",null,this.addLeadingZeros(t.sec)),r.a.createElement("span",null," Sec")),r.a.createElement("div",{className:"Countdown"},e)}}]),t}(a.Component);function de(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}ue.defaultProps={date:new Date};var he=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.props.handler(),n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:de,onClose:this.handleClose},r.a.createElement(N.h,null,"Event Closed"),r.a.createElement(N.g,null,"The event ",this.props.eventName," has concluded.  Your latest rankings have been automatically submitted."),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Close"))))}}]),t}(r.a.Component),me=(n(576),Y()("http://localhost:5000")),pe=Object(te.SortableHandle)(function(){return r.a.createElement("span",null,r.a.createElement(ae.a,{className:"Sliders"}))}),ve=Object(te.SortableElement)(function(e){var t=e.value,n=e.item;return r.a.createElement("li",{className:"rankings"},r.a.createElement("div",{id:"rankNumber"},n+1),r.a.createElement("div",{id:"rankTitle"},t),r.a.createElement(pe,{id:"rankHandle"}))}),Ee=Object(te.SortableContainer)(function(e){var t=e.items;return r.a.createElement("ul",null,0!==t.length?r.a.createElement("div",null):r.a.createElement("div",null,"Tap the Plus to add an entry"),t.map(function(e,t){return r.a.createElement(ve,{key:"item-".concat(t),item:t,index:t,value:e.name})}))}),fe=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSortEnd=function(e){var t=e.oldIndex,a=e.newIndex;n.setState({items:Object(te.arrayMove)(n.state.items,t,a)}),n.updateDatabaseRankings(n.state.items)},n.state={items:[],event:{id:"",name:"",location:"",startDate:"",endDate:"",automate:!1,startVote:"",endVote:"",entries:[]}},n.handleAddEvent=n.handleAddEvent.bind(Object(ee.a)(Object(ee.a)(n))),n.submitConfirm=n.submitConfirm.bind(Object(ee.a)(Object(ee.a)(n))),n.submitted=n.submitted.bind(Object(ee.a)(Object(ee.a)(n))),n.countdownFinished=n.countdownFinished.bind(Object(ee.a)(Object(ee.a)(n))),n.confirmChild=r.a.createRef(),n.closedChild=r.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleAddEvent",value:function(e){e.preventDefault(),this.props.updateItemsHandler(this.state.items),this.props.handler(this.props.voteViews.ADD)}},{key:"componentDidMount",value:function(){var e=this;this.setState({items:this.props.rankItems},function(){J.a.database().ref("/organizer/".concat(e.props.organizer,"/event/")).once("value").then(function(t){var n=t.val();n&&n[e.props.eventID]||console.log("DEV ERROR");var a=n[e.props.eventID].eventData,r=n[e.props.eventID].entries,l=e.state.items;r&&e.props.entryToAdd&&!e.state.items.some(function(t){return t.id===e.props.entryToAdd})&&(l.push({name:r[e.props.entryToAdd].title,id:e.props.entryToAdd}),e.updateDatabaseRankings(l)),e.setState({event:{id:a.id,name:a.name,location:a.location,startDate:a.startDate,endDate:a.endDate,automate:a.automate,startVote:a.startVote,endVote:a.endVote,entries:r},items:l},function(){e.props.updateItemsHandler(e.state.items)})})})}},{key:"updateDatabaseRankings",value:function(e){for(var t=F("UserID"),n=J.a.database().ref("event/".concat(this.props.eventID,"/attendees/").concat(t,"/rankings/")),a=0;a<e.length;a++)n.child(e[a].id).set(a+1)}},{key:"submitConfirm",value:function(){this.props.updateItemsHandler(this.state.items),this.confirmChild.current.handleOpen()}},{key:"submitted",value:function(){var e=this.state.items,t=this.props.organizer,n=this.state.event.id;me.emit("send_votes",{eventId:n,organizerId:t,votes:e}),this.props.handler(this.props.voteViews.SUBMITTED)}},{key:"countdownFinished",value:function(){var e=F("UserID"),t=J.a.database().ref("attendees/".concat(e));t.child("currentEvent").set(""),t.child("pastEvents/".concat(this.props.eventID,"/")).set(this.props.eventID),this.closedChild.current.handleOpen()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(he,{handler:this.submitted,ref:this.closedChild,eventName:this.state.event.name}),r.a.createElement(ce,{handler:this.submitted,ref:this.confirmChild,items:this.state.items,eventID:this.state.event.id}),r.a.createElement(N.t,{variant:"h4",align:"center",className:"eventName",gutterBottom:!0},this.state.event.name),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(le.a,{className:"AddEvent",id:"addEntry",color:"secondary",onClick:this.handleAddEvent})),r.a.createElement("div",null,r.a.createElement("div",{className:"SortContainer"},r.a.createElement(Ee,{items:this.state.items,onSortEnd:this.onSortEnd,lockAxis:"y",useDragHandle:!0,helperClass:"sortHelp"}))),this.state.event.automate?r.a.createElement("div",{className:"SubmitDiv"},r.a.createElement(ie.a,{className:"BellIcon"}),r.a.createElement("div",{className:"SubmitText"},"Voting will close in:",r.a.createElement(ue,{date:this.state.event.endVote,onFinished:this.countdownFinished})),r.a.createElement("div",{className:"buttonDiv"},r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:this.submitConfirm}," Submit "))):r.a.createElement("div",{className:"CenterSubmitDiv"},r.a.createElement("div",{className:"CenterButtonDiv"},r.a.createElement(N.a,{variant:"contained",color:"primary",onClick:this.submitConfirm}," Submit "))))}}]),t}(a.Component),ge=n(124),be=n.n(ge);function ye(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var Ce=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.handleConfirm=function(){n.setState({open:!1}),n.props.handler()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:ye,onClose:this.handleClose},r.a.createElement(N.h,null,"Confirmation"),r.a.createElement(N.g,null,"This ID is for: ",r.a.createElement("br",null),r.a.createElement("b",null,this.props.entryName,".")),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose},"Go Back"),r.a.createElement(N.a,{onClick:this.handleConfirm,color:"primary"},"Confirm"))))}}]),t}(r.a.Component);function Oe(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var ke=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:Oe,onClose:this.handleClose},r.a.createElement(N.h,null,this.props.idType," not found."),r.a.createElement(N.g,null,"There is no ",this.props.idType," that matches the ID: ",this.props.id),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Go Back"))))}}]),t}(r.a.Component);function je(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var De=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:je,onClose:this.handleClose},r.a.createElement(N.h,null,"Alerts"),r.a.createElement(N.g,null,"You have already ","Event"===this.props.idType?"voted in ":"added ","the ",this.props.idType,": ",this.props.entryName),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Go Back"))))}}]),t}(r.a.Component),Ie=n(110),we=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).requestConfirm=function(){var e=n.props.rankItems.filter(function(e){return e.id===n.state.entryID});e.length>0?n.setState({entryTitle:e[0].name},function(){n.blockChild.current.handleOpen()}):J.a.database().ref("organizer/").once("value").then(function(e){var t=e.val()[n.props.organizer].event[n.props.eventID].entries[n.state.entryID];t?n.setState({entryTitle:t.title},function(){n.confirmChild.current.handleOpen()}):n.notFoundChild.current.handleOpen()})},n.handleGoBack=function(){n.props.handler(n.props.voteViews.RANK)},n.state={entryID:"",idFieldValue:"",entryTitle:""},n.handleScan=n.handleScan.bind(Object(ee.a)(Object(ee.a)(n))),n.handleError=n.handleError.bind(Object(ee.a)(Object(ee.a)(n))),n.handleText=n.handleText.bind(Object(ee.a)(Object(ee.a)(n))),n.handleAddEntry=n.handleAddEntry.bind(Object(ee.a)(Object(ee.a)(n))),n.keyPress=n.keyPress.bind(Object(ee.a)(Object(ee.a)(n))),n.confirmChild=r.a.createRef(),n.notFoundChild=r.a.createRef(),n.blockChild=r.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleScan",value:function(e){if(e&&e.toLowerCase().includes(Ie.Global.entryQRPrefix)){var t=e.substring(e.indexOf(Ie.Global.entryQRPrefix)+7).replace(/\W/g,"");this.setState({entryID:t}),this.requestConfirm()}}},{key:"handleText",value:function(){var e=this;this.state.idFieldValue.length>2&&this.setState({entryID:this.state.idFieldValue},function(){e.requestConfirm()})}},{key:"handleAddEntry",value:function(){this.props.handler(this.props.voteViews.RANK,"na","na",this.state.entryID)}},{key:"handleError",value:function(e){}},{key:"keyPress",value:function(e){"Enter"===e.key&&this.handleText()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ke,{ref:this.notFoundChild,idType:"Entry",id:this.state.entryID}),r.a.createElement(Ce,{entryName:this.state.entryTitle,ref:this.confirmChild,handler:this.handleAddEntry}),r.a.createElement(De,{entryName:this.state.entryTitle,idType:"Entry",ref:this.blockChild}),r.a.createElement(be.a,{delay:300,onScan:this.handleScan,onError:this.handleError,style:{width:"80%",margin:"20px auto 0px"}}),r.a.createElement(N.t,{variant:"h5",align:"center",className:"QRText"},"Scan QR Code or enter Entry ID:"),r.a.createElement("div",{className:"textField"},r.a.createElement(N.s,{id:"outlined-dense",label:"Entry ID",margin:"dense",variant:"outlined",value:this.state.idFieldValue,onKeyPress:this.keyPress,onChange:function(t){return e.setState({idFieldValue:t.target.value})}})),r.a.createElement("div",{className:"submitButtonContainer"},r.a.createElement(N.a,{variant:"contained",color:"default",className:"goBackButton",onClick:this.handleGoBack},"Back"),r.a.createElement(N.a,{variant:"contained",color:"primary",className:"confirmButton",onClick:this.handleText},"Add")))}}]),t}(r.a.Component);function Se(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var Ve=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:Se,onClose:this.handleClose},r.a.createElement(N.h,null,"Alerts"),r.a.createElement(N.g,null,"The event, ",r.a.createElement("b",null,this.props.eventName),", has not started yet."),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Go Back"))))}}]),t}(r.a.Component);function Ne(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var Te=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:Ne,onClose:this.handleClose},r.a.createElement(N.h,null,"Alerts"),r.a.createElement(N.g,null,"The voting period for ",r.a.createElement("b",null,this.props.eventName)," has closed."),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Go Back"))))}}]),t}(r.a.Component);function Ae(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var xe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:Ae,onClose:this.handleClose},r.a.createElement(N.h,null,"Alerts"),r.a.createElement(N.g,null,"The event you were participating in, ",r.a.createElement("b",null,this.props.eventName),", has closed. Your vote has been automatically submitted."),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Go Back"))))}}]),t}(r.a.Component);function Re(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var Fe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.handleConfirm=function(){n.setState({open:!1}),n.props.handler()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:Re,onClose:this.handleClose},r.a.createElement(N.h,null,"Current Event"),r.a.createElement(N.g,null,"You are currently signed in to:",r.a.createElement("br",null),r.a.createElement("b",null,this.props.entryName),r.a.createElement("br",null),"Would you like to rejoin?"),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose},"No"),r.a.createElement(N.a,{onClick:this.handleConfirm,color:"primary"},"Yes"))))}}]),t}(r.a.Component),ze=n(110),qe=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).requestConfirm=function(){J.a.database().ref("event/").once("value").then(function(e){var t=e.val()[n.state.eventID];n.setState({organizerID:t?t.organizer:""},function(){n.state.organizerID&&""!==n.state.organizerID?J.a.database().ref("/organizer/"+n.state.organizerID+"/event/"+n.state.eventID).once("value").then(function(e){var t=e.val();t?n.setState({eventName:t.eventData.name},function(){var e=n.getVotingState(t.eventData);if(console.log(e),"before"!==e)if("closed"!==e){var a=F("UserID"),r=!1;J.a.database().ref("attendees/".concat(a,"/pastEvents")).once("value").then(function(e){var t=e.val();for(var a in t)if(a===n.state.eventID)return r=!0,void n.blockChild.current.handleOpen();r||n.confirmChild.current.handleOpen()})}else n.closedJoinChild.current.handleOpen();else n.earlyJoinChild.current.handleOpen()}):n.notFoundChild.current.handleOpen()}):n.notFoundChild.current.handleOpen()})})},n.state={eventID:"",idFieldValue:"",eventName:"",organizerID:""},n.handleScan=n.handleScan.bind(Object(ee.a)(Object(ee.a)(n))),n.handleError=n.handleError.bind(Object(ee.a)(Object(ee.a)(n))),n.handleText=n.handleText.bind(Object(ee.a)(Object(ee.a)(n))),n.handleJoinEvent=n.handleJoinEvent.bind(Object(ee.a)(Object(ee.a)(n))),n.keyPress=n.keyPress.bind(Object(ee.a)(Object(ee.a)(n))),n.handleRejoinEvent=n.handleRejoinEvent.bind(Object(ee.a)(Object(ee.a)(n))),n.confirmChild=r.a.createRef(),n.earlyJoinChild=r.a.createRef(),n.closedJoinChild=r.a.createRef(),n.blockChild=r.a.createRef(),n.notFoundChild=r.a.createRef(),n.rejoinChild=r.a.createRef(),n.rejoinClosedChild=r.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=F("UserID");J.a.database().ref("attendees/".concat(t)).once("value").then(function(n){var a=n.val();a&&a.currentEvent&&J.a.database().ref("event/").once("value").then(function(n){var r=n.val()[a.currentEvent];e.setState({organizerID:r?r.organizer:""},function(){e.state.organizerID&&""!==e.state.organizerID&&J.a.database().ref("/organizer/".concat(e.state.organizerID,"/event/").concat(a.currentEvent)).once("value").then(function(n){var r=n.val();r&&e.setState({eventName:r.eventData.name,eventID:a.currentEvent},function(){if("closed"===e.getVotingState(r.eventData))return e.rejoinClosedChild.current.handleOpen(),void J.a.database().ref("attendees/".concat(t,"/currentEvent")).set("");e.rejoinChild.current.handleOpen()})})})})})}},{key:"getVotingState",value:function(e){var t=(new Date).toISOString();return"none"===e.startVote||e.startVote>t?"before":"none"===e.endVote||e.endVote>t?"open":"closed"}},{key:"handleScan",value:function(e){if(e&&e.toLowerCase().includes((ze.Global.hostURL+"/vote/").toLowerCase())){var t=e.substring(e.indexOf("/vote/")+6).replace(/\W/g,"");if(this.state.eventID===t)return void this.handleRejoinEvent();this.setState({eventID:t}),this.requestConfirm()}}},{key:"handleText",value:function(){var e=F("UserID"),t="";if(J.a.database().ref("attendees/".concat(e,"/currentEvent")).once("value").then(function(e){t=e.val(),console.log(t)}),this.state.idFieldValue===this.state.eventID&&this.state.idFieldValue.length>2&&this.state.eventID===t)return console.log("rejoined"),void this.handleRejoinEvent();this.setState({eventID:this.state.idFieldValue}),this.state.idFieldValue.length>2&&this.requestConfirm()}},{key:"handleRejoinEvent",value:function(){var e=this,t=F("UserID");J.a.database().ref("event/".concat(this.state.eventID,"/attendees/").concat(t,"/rankings/")).once("value").then(function(t){var n=t.val(),a=[];if(n)for(var r in n)r&&(a[n[r]-1]=r);J.a.database().ref("organizer/").once("value").then(function(t){for(var n=t.val()[e.state.organizerID].event[e.state.eventID],r=[],l=0;l<a.length;l++){var o=n.entries[a[l]];o&&r.push({name:o.title,id:o.id.toString()})}e.props.updateItemsHandler(r)}).then(function(){e.handleJoinEvent()})})}},{key:"handleJoinEvent",value:function(){var e=F("UserID");J.a.database().ref("attendees/".concat(e)).child("currentEvent").set(this.state.eventID),this.props.handler(this.props.voteViews.RANK,this.state.eventID,this.state.organizerID)}},{key:"handleError",value:function(e){}},{key:"keyPress",value:function(e){"Enter"===e.key&&this.handleText()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Fe,{entryName:this.state.eventName,ref:this.rejoinChild,handler:this.handleRejoinEvent}),r.a.createElement(ke,{ref:this.notFoundChild,idType:"Event",id:this.state.eventID}),r.a.createElement(Ce,{entryName:this.state.eventName,ref:this.confirmChild,handler:this.handleJoinEvent}),r.a.createElement(De,{entryName:this.state.eventName,idType:"Event",ref:this.blockChild}),r.a.createElement(Ve,{eventName:this.state.eventName,ref:this.earlyJoinChild}),r.a.createElement(Te,{eventName:this.state.eventName,ref:this.closedJoinChild}),r.a.createElement(xe,{eventName:this.state.eventName,ref:this.rejoinClosedChild}),r.a.createElement(be.a,{delay:300,onScan:this.handleScan,onError:this.handleError,style:{width:"80%",margin:"20px auto 0px"}}),r.a.createElement(N.t,{variant:"h5",align:"center",className:"QRText"},"Scan QR Code or enter Event ID:"),r.a.createElement("div",{className:"textField"},r.a.createElement(N.s,{id:"outlined-dense",label:"Event ID",margin:"dense",variant:"outlined",value:this.state.idFieldValue,onKeyDown:this.keyPress,onChange:function(t){return e.setState({idFieldValue:t.target.value})}})),r.a.createElement("div",{className:"submitButtonContainer"},r.a.createElement(N.a,{variant:"contained",color:"primary",className:"homeButton",onClick:this.handleText},"Join")))}}]),t}(r.a.Component),Be=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"SubmissionPage"},r.a.createElement(N.t,{variant:"h4",align:"center",className:"submissionText",gutterBottom:!0},"Submission Successful."),r.a.createElement(N.t,{variant:"h5",align:"center",className:"questionText",gutterBottom:!0},"Thank you for your participation!"),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement(N.a,{variant:"contained",color:"default",className:"homeButton",onClick:function(){return Object(x.navigate)("/")}},r.a.createElement(k.a,null)))))}}]),t}(r.a.Component),Pe=Y()("http://localhost:5000"),Le={JOIN:"JoinEvent",ADD:"AddEntry",RANK:"Ranking",SUBMITTED:"Submitted"},Me=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={curView:Le.JOIN,eventID:"",organizerID:"",entryToAdd:"",rankingItems:[]},n.changeView=n.changeView.bind(Object(ee.a)(Object(ee.a)(n))),n.updateItems=n.updateItems.bind(Object(ee.a)(Object(ee.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"updateItems",value:function(e){var t=this;this.setState({rankingItems:e},function(){Pe.emit("update_rankings",{votes:t.state.rankingItems})})}},{key:"changeView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"na",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"na",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";"na"!==t&&"na"!==n?this.setState({curView:e,eventID:t,organizerID:n,entryToAdd:a}):this.setState({curView:e,entryToAdd:a})}},{key:"render",value:function(){switch(this.state.curView){case Le.ADD:return r.a.createElement(we,{voteViews:Le,eventID:this.state.eventID,organizer:this.state.organizerID,handler:this.changeView,rankItems:this.state.rankingItems});case Le.RANK:return r.a.createElement(fe,{voteViews:Le,eventID:this.state.eventID,organizer:this.state.organizerID,entryToAdd:this.state.entryToAdd,rankItems:this.state.rankingItems,updateItemsHandler:this.updateItems,handler:this.changeView});case Le.SUBMITTED:return r.a.createElement(Be,{voteViews:Le,handler:this.changeView});default:return r.a.createElement(qe,{voteViews:Le,updateItemsHandler:this.updateItems,handler:this.changeView})}}}]),t}(r.a.Component),Ue=n(75),Ge=n(32),_e=n(41),We=n.n(_e),He=(n(581),n(70),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={eventData:{name:"",id:"",location:"",startDate:new Date,endDate:new Date,automate:!1,sheetURL:"",startVote:new Date,endVote:new Date}},n.AddEntries=function(e){e.preventDefault();var t=n.state.eventData;t.id||(t.id=Math.floor(1e4*Math.random()+1));var a=n.props.user.googleId,r=J.a.database().ref("event");r.once("value",function(e){var l=!1;for(e.forEach(function(e){e.key===t.id&&(l=!0)});!0===l;)l=!1,t.id=Math.floor(1e4*Math.random()+1),e.forEach(function(e){e.key===t.id&&(l=!0)});r.child(t.id).set({organizer:a});var o=J.a.database().ref("organizer/".concat(a,"/event/").concat(t.id));t.startDate=t.startDate.toISOString(),t.endDate=t.endDate.toISOString(),t.automate?(t.startVote=t.startVote.toISOString(),t.endVote=t.endVote.toISOString()):(t.startVote="none",t.endVote="none"),o.child("eventData").set(t),n.props.setEvent(t.id),n.props.handler(n.props.orgViews.ADD)})},n.toggleAutomation=function(){var e=n.state.eventData;e.automate=!n.state.eventData.automate,n.setState({eventData:e})},n.handleEventChange=function(e){return function(t){var a=n.state.eventData;a[e]=t.target.value,n.setState({eventData:a})}},n.handleDateChange=function(e){return function(t){var a=n.state.eventData;a[e]=t,n.setState({eventData:a})}},n.cancelAddition=function(){n.props.handler(n.props.orgViews.MAIN)},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"newEventForm"},r.a.createElement(N.t,{variant:"h4",align:"center",gutterBottom:!0},"Create a new event"),r.a.createElement("form",{className:"eventForm",onSubmit:this.AddEntries},r.a.createElement(N.t,{variant:"h6"},"Event Details"),r.a.createElement(N.s,{required:!0,label:"Event Name",margin:"dense",className:"entryFormText",value:this.state.eventData.name,onChange:this.handleEventChange("name"),InputLabelProps:{shrink:!0}}),r.a.createElement(N.s,{label:"ID (auto if blank)",margin:"dense",className:"entryFormText",value:this.state.eventData.id,onChange:this.handleEventChange("id"),InputLabelProps:{shrink:!0}}),r.a.createElement("br",null),r.a.createElement(N.s,{required:!0,label:"Location",margin:"dense",className:"entryFormText",value:this.state.eventData.location,onChange:this.handleEventChange("location"),InputLabelProps:{shrink:!0}}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(Ge.c,{utils:Ue.a},r.a.createElement(Ge.a,{required:!0,label:"Start Date",margin:"dense",className:"entryFormText",value:this.state.eventData.startDate,onChange:this.handleDateChange("startDate"),InputProps:{startAdornment:r.a.createElement(N.m,{position:"start"},r.a.createElement(We.a,null))}}),r.a.createElement(Ge.a,{required:!0,label:"End Date",margin:"dense",className:"entryFormText",value:this.state.eventData.endDate,onChange:this.handleDateChange("endDate"),InputProps:{startAdornment:r.a.createElement(N.m,{position:"start"},r.a.createElement(We.a,null))}})),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(N.k,{control:r.a.createElement(N.r,{checked:this.state.eventData.automate,onChange:function(){return e.toggleAutomation()},value:this.state.eventData.automate,color:"primary"}),label:"Automate Voting Time Period?",labelPlacement:"start"}),this.state.eventData.automate&&r.a.createElement("div",null,r.a.createElement(Ge.c,{utils:Ue.a},r.a.createElement(N.t,{className:"votePeriodText"},"Start Voting:"),r.a.createElement(Ge.b,{margin:"dense",className:"entryFormText",value:this.state.eventData.startVote,onChange:this.handleDateChange("startVote"),InputProps:{startAdornment:r.a.createElement(N.m,{position:"start"},r.a.createElement(We.a,null))}}),r.a.createElement(N.t,{className:"votePeriodText"},"End Voting:"),r.a.createElement(Ge.b,{margin:"dense",className:"entryFormText",value:this.state.eventData.endVote,onChange:this.handleDateChange("endVote"),InputProps:{startAdornment:r.a.createElement(N.m,{position:"start"},r.a.createElement(We.a,null))}}))),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",className:"buttons",type:"button",onClick:this.cancelAddition},"Cancel"),r.a.createElement(N.a,{variant:"contained",className:"buttons",type:"submit",color:"primary"},"Next")))}}]),t}(r.a.Component)),Je=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={events:[]},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user.googleId,n=J.a.database().ref("organizer/".concat(t,"/event")),a=[];n.on("value",function(t){var n=t.val();for(var r in n){var l="".concat(r,"/eventData"),o=t.child("".concat(l,"/id")).val(),i=t.child("".concat(l,"/name")).val(),s=t.child("".concat(l,"/location")).val(),c=t.child("".concat(l,"/startDate")).val(),u=t.child("".concat(l,"/endDate")).val(),d=t.child("".concat(l,"/automate")).val(),h=t.child("".concat(l,"/startVote")).val(),m=t.child("".concat(l,"/endVote")).val();a.push({id:o,name:i,location:s,startDate:c,endDate:u,automate:d,startVote:h,endVote:m})}e.setState({events:a})})}},{key:"parseDate",value:function(e){return"".concat(e.substring(5,7),"/").concat(e.substring(8,10),"/").concat(e.substring(0,4))}},{key:"AddEvent",value:function(){this.props.handler(this.props.orgViews.CREATE)}},{key:"viewEvent",value:function(e){this.props.setEvent(e),this.props.handler(this.props.orgViews.VIEW)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(N.t,{variant:"h4",align:"center",gutterBottom:!0},sessionStorage.getItem("name"),"'s Events"),r.a.createElement(N.l,{container:!0,className:"organizerEvents"},r.a.createElement(N.l,{item:!0,className:"eventContainer",id:"addEvent"},r.a.createElement(le.a,{color:"primary",id:"addCircleIcon",onClick:function(){return e.AddEvent()}})),this.state.events.map(function(t,n){return r.a.createElement(N.a,{className:"eventContainer",variant:"contained",color:"primary",id:"openEvent",onClick:function(){return e.viewEvent(t.id)},key:n},t.name,r.a.createElement("br",null),e.parseDate(t.startDate)," - ",e.parseDate(t.endDate),r.a.createElement("br",null),r.a.createElement("br",null),"Voting period is ",t.automate?"automated.":"not automated.")})),r.a.createElement("div",null))}}]),t}(r.a.Component),Qe=n(27),Ye=n(74),Ke=n.n(Ye),Ze=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={show:!0,title:n.props.currValue.title,id:n.props.currValue.id,presenters:n.props.currValue.presenters,entry_dates:n.props.currValue.entry_dates},n.delEntry=function(){n.setState({show:!1},function(){n.props.updateEntry(n.state,n.props.index)})},n.handleChange=function(e){return function(t){n.setState(Object(Qe.a)({},e,t.target.value),function(){n.props.updateEntry(n.state,n.props.index)})}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.show?r.a.createElement("div",{className:"addEntry"},r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(N.s,{required:!0,label:"Entry Title",margin:"dense",className:"entryFormText",value:this.state.title,onChange:this.handleChange("title")}),r.a.createElement(N.s,{required:!0,label:"Presenters",margin:"dense",className:"entryFormText",value:this.state.presenters,onChange:this.handleChange("presenters")}),r.a.createElement(N.s,{required:!0,label:"Date(s) Attending",margin:"dense",className:"entryFormText",value:this.state.entry_dates,onChange:this.handleChange("entry_dates")})),r.a.createElement(Ke.a,{color:"primary",id:"entryIcon",onClick:this.delEntry})):null}}]),t}(r.a.Component),$e=n(270),Xe=n.n($e);n(598);function et(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var tt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:et,onClose:this.handleClose},r.a.createElement(Xe.a,{onClick:this.handleClose}),r.a.createElement(N.h,null,"Import Information"),r.a.createElement(N.g,null,"Accepted file type: .csv ",r.a.createElement("br",null),r.a.createElement("br",null),"Accepted file format: 3 columns in the order of Entry Titles, Presenters, Date(s) Attending",r.a.createElement("br",null),r.a.createElement("br",null),"*Data is read assuming there is a header row, so the first row will be skipped.",r.a.createElement("br",null),r.a.createElement("br",null),"Example file:",r.a.createElement("table",{id:"table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Entry Title"),r.a.createElement("td",null,"Presenters"),r.a.createElement("td",null,"Date(s) Attending")),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null)))))))}}]),t}(r.a.Component),nt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).openInfo=function(){n.infoPopup.current.handleOpen()},n.addEntry=function(){var e=n.state.entries.slice();e.push({show:!0,title:"",id:"",presenters:"",entry_dates:""}),n.setState({entries:e,alert:n.state.alert})},n.cancelAddition=function(){n.props.handler(n.props.orgViews.MAIN)},n.readCSV=function(e){var t=e.target.files[0];if(t){var a,r=new FileReader;r.onload=function(e){var l=r.result;a=r.result;for(var o,i,s,c,u=l.split(/[\r\n]+/g),d=[],h=1;h<u.length;h++){if(3!==(o=u[h].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/)).length&&0!==o.length)return a='File format is incorrect. Please see "Import Requirements" for correct formatting.',void n.setState({entries:n.state.entries,alert:a});if(i=o[0],s=o[1],c=o[2],!(i&&s&&c))return a='Some required data is missing. Please see "Import Requirements" for correct formatting.',void n.setState({entries:n.state.entries,alert:a});d.push({show:!0,title:i,id:"",presenters:s,entry_dates:c})}a="Success! Entries from ".concat(t.name," were imported."),n.setState({entries:n.state.entries.concat(d),alert:a})},r.readAsText(t)}else n.setState({alert:"Unable to read file."})},n.state={entries:[],alert:""},n.infoPopup=r.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"updateEntry",value:function(e,t){var n=this.state.entries;n[t]=e,this.setState({entries:n,alert:this.state.alert})}},{key:"submitEntries",value:function(){for(var e=this.props.user.googleId,t=this.props.curEvent,n=1e3+Math.floor(8e3*Math.random()+1),a=0;a<this.state.entries.length;a++){var r=this.state.entries[a];if(r.show)r.id=n+a,J.a.database().ref("organizer/".concat(e,"/event/").concat(t,"/entries")).child(r.id).set(r)}this.props.handler(this.props.orgViews.MAIN)}},{key:"render",value:function(){var e=this,t=this.state.entries;return r.a.createElement("div",{className:"addEntryForm"},r.a.createElement(tt,{ref:this.infoPopup}),r.a.createElement(N.t,{variant:"h4",align:"center",gutterBottom:!0},"Add Entries"),r.a.createElement(N.a,{variant:"contained",component:"label",className:"buttons",name:"import_entries"},"Import Entries",r.a.createElement("input",{type:"file",accept:".csv",style:{display:"none"},onChange:function(t){return e.readCSV(t)}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.t,{variant:"subtitle1",align:"center"},this.state.alert),r.a.createElement(N.a,{variant:"text",className:"buttons",onClick:this.openInfo},"Click here for import requirements."),r.a.createElement(N.i,{variant:"middle"}),r.a.createElement("form",{className:"entryForm",onSubmit:function(){return e.submitEntries()}},t.map(function(t,n){return r.a.createElement("div",{key:n},r.a.createElement(Ze,{currValue:t,updateEntry:function(t,n){return e.updateEntry(t,n)},index:n}))}),r.a.createElement(le.a,{color:"primary",id:"entryIcon",onClick:this.addEntry}),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",className:"buttons",type:"button",onClick:this.cancelAddition},"Cancel"),r.a.createElement(N.a,{type:"submit",variant:"contained",color:"primary",className:"buttons"},"Done")))}}]),t}(r.a.Component),at=n(177),rt=n.n(at),lt=n(271),ot=n.n(lt),it=n(110);function st(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var ct=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,exportEntry:!0,exportEvent:!0},n.toggleEntryExport=function(){n.setState({exportEntry:!n.state.exportEntry})},n.toggleEventExport=function(){n.setState({exportEvent:!n.state.exportEvent})},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.generatePDF=function(){if(n.state.exportEntry||n.state.exportEvent){var e,t,a,r=new ot.a("portrait","mm","letter"),l="";if(n.state.exportEvent&&(l="Event",e="Event ID: "+n.props.event.id,t=rt.a.imageSync(it.Global.hostURL+"/vote/"+n.props.event.id),r.addImage(t,"PNG",58,20,100,100),r.text(n.props.event.name,108,20,"center"),r.text(e,108,125,"center")),n.state.exportEntry)for(var o in l+="Entries",n.props.event.entries)a=n.props.event.entries[o],r.addPage(),e="Entry ID: "+a.id,t=rt.a.imageSync(it.Global.entryQRPrefix+String(a.id)),r.addImage(t,"PNG",58,20,100,100),r.text(a.title,108,20,"center"),r.text(e,108,125,"center");var i=n.props.event.name.replace(/\s+/g,"");r.save(i+l+"QRCodes.pdf")}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:st,onClose:this.handleClose},r.a.createElement(N.h,null," Export "),r.a.createElement(N.g,null,r.a.createElement(N.k,{control:r.a.createElement(N.r,{checked:this.state.exportEvent,onChange:function(){return e.toggleEventExport()},value:this.state.exportEvent,color:"primary"}),label:"Export Event QR",labelPlacement:"start"})," ",r.a.createElement("br",null),r.a.createElement(N.k,{control:r.a.createElement(N.r,{checked:this.state.exportEntry,onChange:function(){return e.toggleEntryExport()},value:this.state.exportEntry,color:"primary"}),label:"Export Entry QR",labelPlacement:"start"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",onClick:this.generatePDF},"Export QR to PDF")),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Go Back"))))}}]),t}(r.a.Component);function ut(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var dt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,title:"",id:"",presenters:"",entry_dates:""},n.handleOpen=function(e){n.setState({open:!0,title:n.props.event.entries[e].title,id:e,presenters:n.props.event.entries[e].presenters,entry_dates:n.props.event.entries[e].entry_dates})},n.handleDelete=function(){n.setState({open:!1}),J.a.database().ref("organizer/"+n.props.googleId+"/event/"+n.props.event.id+"/entries/"+n.state.id).remove()},n.handleClose=function(){n.setState({open:!1})},n.handleSaveClose=function(){n.setState({open:!1});var e=J.a.database().ref("organizer/"+n.props.googleId+"/event/"+n.props.event.id+"/entries/"+n.state.id);e.child("title").set(n.state.title),e.child("presenters").set(n.state.presenters),e.child("entry_dates").set(n.state.entry_dates)},n.handleChange=function(e){return function(t){n.setState(Object(Qe.a)({},e,t.target.value))}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.open?r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:ut,onClose:this.handleClose},r.a.createElement(N.h,null," View/Edit Entry "),r.a.createElement(N.g,null,r.a.createElement(N.s,{required:!0,label:"Entry Title",margin:"dense",className:"entryFormText",defaultValue:this.state.title,onChange:this.handleChange("title")}),r.a.createElement(N.s,{disabled:!0,label:"ID (cannot be changed)",margin:"dense",className:"entryFormText",value:this.state.id}),r.a.createElement("br",null),r.a.createElement(N.s,{required:!0,label:"Presenters",margin:"dense",className:"entryFormText",defaultValue:this.state.presenters,onChange:this.handleChange("presenters")}),r.a.createElement(N.s,{required:!0,label:"Date(s) Attending",margin:"dense",className:"entryFormText",defaultValue:this.state.entry_dates,onChange:this.handleChange("entry_dates")})),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleDelete},"Delete"),r.a.createElement(N.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(N.a,{onClick:this.handleSaveClose,color:"primary"},"Save")))):null}}]),t}(r.a.Component);n(260);function ht(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var mt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,name:"",id:"",location:"",startDate:"",endDate:"",automate:!1,startVote:"",endVote:"",confirmDelete:!1},n.handleOpen=function(){n.setState({open:!0,name:n.props.event.name,id:n.props.event.id,location:n.props.event.location,startDate:n.props.event.startDate,endDate:n.props.event.endDate,automate:n.props.event.automate,startVote:n.props.event.startVote,endVote:n.props.event.endVote})},n.handleClose=function(){n.setState({open:!1})},n.handleSaveClose=function(){n.setState({open:!1});var e=J.a.database().ref("organizer/".concat(n.props.googleId,"/event/").concat(n.props.event.id,"/eventData/")),t=n.state;e.child("name").set(t.name),e.child("location").set(t.location),e.child("automate").set(t.automate),t.startDate!==n.props.event.startDate&&e.child("startDate").set(t.startDate.toISOString()),t.endDate!==n.props.event.endDate&&e.child("endDate").set(t.endDate.toISOString()),t.automate?(t.startVote!==n.props.event.startVote&&e.child("startVote").set(t.startVote.toISOString()),t.endVote!==n.props.event.endVote&&e.child("endVote").set(t.endVote.toISOString())):(e.child("startVote").set("none"),e.child("endVote").set("none"))},n.handleChange=function(e){return function(t){n.setState(Object(Qe.a)({},e,t.target.value))}},n.handleDateChange=function(e){return function(t){n.setState(Object(Qe.a)({},e,t))}},n.toggleAutomation=function(){n.setState(function(e){return{automate:!e.automate}})},n.handleDeleteEvent=function(){n.props.handler(n.props.orgViews.MAIN);var e=J.a.database().ref();e.child("event/".concat(n.state.id)).remove(),e.child("organizer/".concat(n.props.googleId,"/event/").concat(n.state.id)).remove()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.state.open?r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:ht,onClose:this.handleClose},r.a.createElement(N.h,null," Edit Event "),r.a.createElement(N.g,null,r.a.createElement(N.s,{required:!0,label:"Event Name",margin:"dense",className:"entryFormText",defaultValue:this.state.name,onChange:this.handleChange("name")}),r.a.createElement(N.s,{disabled:!0,label:"ID (cannot be changed)",margin:"dense",className:"entryFormText",value:this.props.event.id}),r.a.createElement("br",null),r.a.createElement(N.s,{required:!0,label:"Location",margin:"dense",className:"entryFormText",defaultValue:this.state.location,onChange:this.handleChange("location")}),r.a.createElement("br",null),r.a.createElement(Ge.c,{utils:Ue.a},r.a.createElement(Ge.a,{required:!0,label:"Start Date",margin:"dense",className:"entryFormText",value:this.state.startDate,onChange:this.handleDateChange("startDate"),InputProps:{startAdornment:r.a.createElement(N.m,{position:"start"},r.a.createElement(We.a,null))}}),r.a.createElement(Ge.a,{required:!0,label:"End Date",margin:"dense",className:"entryFormText",value:this.state.endDate,onChange:this.handleDateChange("endDate"),InputProps:{startAdornment:r.a.createElement(N.m,{position:"start"},r.a.createElement(We.a,null))}})),r.a.createElement("br",null),r.a.createElement(N.k,{control:r.a.createElement(N.r,{checked:this.state.automate,onChange:function(){return e.toggleAutomation()},value:this.state.automate,color:"primary"}),label:"Automate Voting Time Period?",labelPlacement:"start"}),this.state.automate&&r.a.createElement("div",null,r.a.createElement(Ge.c,{utils:Ue.a},r.a.createElement(Ge.b,{margin:"dense",className:"entryFormText",label:"Start Voting",value:this.state.startVote?this.state.startVote:new Date,onChange:this.handleDateChange("startVote"),InputProps:{startAdornment:r.a.createElement(N.m,{position:"start"},r.a.createElement(We.a,null))}}),r.a.createElement(Ge.b,{margin:"dense",className:"entryFormText",label:"End Voting",value:this.state.endVote?this.state.endVote:new Date,onChange:this.handleDateChange("endVote"),InputProps:{startAdornment:r.a.createElement(N.m,{position:"start"},r.a.createElement(We.a,null))}}))),r.a.createElement("br",null),this.state.confirmDelete?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Are you sure you want to delete this event? ",r.a.createElement("br",null)," (this cannot be undone)"),r.a.createElement(N.a,{className:"button1",variant:"contained",color:"primary",onClick:function(){return e.handleDeleteEvent()}}," Yes "),r.a.createElement(N.a,{className:"button1",variant:"contained",color:"default",onClick:function(){e.setState({confirmDelete:!1})}}," No ")):r.a.createElement(N.a,{variant:"contained",style:{background:"#B00020",color:"#FFFFFF"},onClick:function(){e.setState({confirmDelete:!0})}},"Delete Event")),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Go Back"),r.a.createElement(N.a,{onClick:this.handleSaveClose,color:"primary"},"Save")))):null}}]),t}(r.a.Component);function pt(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var vt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.openVoting=function(){var e=J.a.database().ref("organizer/".concat(n.props.googleId,"/event/").concat(n.props.event.id,"/eventData/"));e.child("startVote").set((new Date).toISOString()),e.child("endVote").set("none"),n.handleClose()},n.closeVoting=function(){J.a.database().ref("organizer/".concat(n.props.googleId,"/event/").concat(n.props.event.id,"/eventData/")).child("endVote").set((new Date).toISOString()),n.handleClose()},n.reopenVoting=function(){var e=J.a.database().ref("organizer/".concat(n.props.googleId,"/event/").concat(n.props.event.id,"/eventData/"));e.child("startVote").set((new Date).toISOString()),e.child("endVote").set("none"),n.handleClose()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"getVotingState",value:function(){return"none"===this.props.event.startVote||this.props.event.startVote>(new Date).toISOString()?"before":"none"===this.props.event.endVote||this.props.event.endVote>(new Date).toISOString()?"open":"closed"}},{key:"addLeadingZeros",value:function(e){for(var t=String(e);t.length<2;)t="0".concat(t);return t}},{key:"parseDate",value:function(e){return"".concat(e.substring(5,7),"/").concat(e.substring(8,10),"/").concat(e.substring(0,4))}},{key:"parseTime",value:function(e){var t=new Date(e);return"".concat(t.getHours(),":").concat(this.addLeadingZeros(t.getMinutes()))}},{key:"renderOptions",value:function(){switch(this.getVotingState()){case"before":return r.a.createElement(N.g,null,"The voting period has not been opened.",r.a.createElement("br",null),r.a.createElement("br",null),"Automated voting period ",this.props.event.automate?"is":"is not"," enabled. ",r.a.createElement("br",null),this.props.event.automate?r.a.createElement("div",null,"Voting will open on ",this.parseDate(this.props.event.startVote)," at ",this.parseTime(this.props.event.startVote),r.a.createElement("br",null),r.a.createElement("br",null)):"",r.a.createElement("i",null,"Note: Manually opening voting will override automated start time."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",onClick:this.openVoting},"Open Voting"));case"open":return r.a.createElement(N.g,null,"The voting period is currently open.",r.a.createElement("br",null),r.a.createElement("br",null),"Automated voting period ",this.props.event.automate?"is":"is not"," enabled.",r.a.createElement("br",null),this.props.event.automate?r.a.createElement("div",null,"Voting will close on ",this.parseDate(this.props.event.endVote)," at ",this.parseTime(this.props.event.endVote),r.a.createElement("br",null),r.a.createElement("br",null)):"",r.a.createElement("i",null,"Note: Manually closing voting will override automated end time."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",onClick:this.closeVoting},"Close Voting"));default:return r.a.createElement(N.g,null,"The voting period has closed.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",onClick:this.reopenVoting},"Re-Open Voting"))}}},{key:"render",value:function(){return this.state.open?r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:pt,onClose:this.handleClose},r.a.createElement(N.h,null," Open/Close Voting "),this.renderOptions(),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"primary"},"Go Back")))):null}}]),t}(r.a.Component);function Et(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var ft=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,title:"",presenters:"",entry_dates:""},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1,title:"",presenters:"",entry_dates:""})},n.handleSaveClose=function(){var e;if(n.props.event.entries){var t=n.props.event.entries,a=Object.keys(t);e=1+parseInt(t[a[a.length-1]].id)}else{e=1e3+Math.floor(8e3*Math.random()+1)}var r=J.a.database().ref("organizer/"+n.props.googleId+"/event/"+n.props.event.id+"/entries/"+e);r.child("title").set(n.state.title),r.child("id").set(e),r.child("presenters").set(n.state.presenters),r.child("entry_dates").set(n.state.entry_dates),n.handleClose()},n.handleChange=function(e){return function(t){n.setState(Object(Qe.a)({},e,t.target.value))}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:Et,onClose:this.handleClose},r.a.createElement(N.h,null," Add New Entry "),r.a.createElement(N.g,null,r.a.createElement(N.s,{required:!0,label:"Entry Title",margin:"dense",className:"entryFormText",defaultValue:this.state.title,onChange:this.handleChange("title")}),r.a.createElement("br",null),r.a.createElement(N.s,{required:!0,label:"Presenters",margin:"dense",className:"entryFormText",defaultValue:this.state.presenters,onChange:this.handleChange("presenters")}),r.a.createElement(N.s,{required:!0,label:"Date(s) Attending",margin:"dense",className:"entryFormText",defaultValue:this.state.entry_dates,onChange:this.handleChange("entry_dates")})),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(N.a,{onClick:this.handleSaveClose,color:"primary"},"Add"))))}}]),t}(r.a.Component),gt=Y()("http://localhost:5000");function bt(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var yt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.handleSave=function(){var e=n.state.weights;""!==e[0]&&""!==e[1]&&""!==e[2]&&gt.emit("send_weights",{weights:n.state.weights,eventId:n.props.event.id,googleId:n.props.googleId}),n.setState({open:!1})},n.handleWeightChange=function(e){return function(t){var a=n.state.weights;a[e]=t.target.value,n.setState({weights:a})}},n.state={open:!1,weights:["","",""]},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.state.open?r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:bt,onClose:this.handleClose},r.a.createElement(N.h,null," Edit Weights "),r.a.createElement(N.g,null,this.state.weights.map(function(t,n){return r.a.createElement("div",null,r.a.createElement(N.s,{label:"Rank "+(n+1),margin:"dense",value:t,onChange:e.handleWeightChange(n)}))})),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"default"},"Close"),r.a.createElement(N.a,{onClick:this.handleSave,color:"primary"},"Save")))):null}}]),t}(r.a.Component),Ct=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={show:!0,id:"",title:"",rank:n.props.entriesInVote[n.props.index].rank,entries:[],duplicate:!1,valid:!1},n.delEntry=function(){n.setState({show:!1},function(){n.props.updateEntry(n.state,n.props.index)})},n.handleChange=function(e){return function(t){n.setState({rank:n.props.entriesInVote[n.props.index].rank});var a,r,l="",o=n.state.entries[t.target.value];(o&&(l=o.title),""!==l)?n.setState((a={},Object(Qe.a)(a,e,t.target.value),Object(Qe.a)(a,"title",l),Object(Qe.a)(a,"valid",!0),a),function(){n.props.updateEntry(n.state,n.props.index)}):n.setState((r={},Object(Qe.a)(r,e,t.target.value),Object(Qe.a)(r,"title",""),Object(Qe.a)(r,"valid",!1),r),function(){n.props.updateEntry(n.state,n.props.index)});n.setState({duplicate:!1});for(var i=0;i<n.props.entriesInVote.length;i++){var s=n.props.entriesInVote[i];s.show&&i!==n.props.index&&s.id===t.target.value&&n.setState({duplicate:!0})}}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;J.a.database().ref("organizer/".concat(this.props.googleId,"/event/").concat(this.props.event.id)).on("value",function(t){var n=t.val().entries;e.setState({entries:n})})}},{key:"render",value:function(){return this.state.show&&this.state.valid&&!this.state.duplicate?r.a.createElement("div",{className:"addEntry"},r.a.createElement("br",null),r.a.createElement("label",{className:"rankingLabel",id:this.props.index},this.props.entriesInVote[this.props.index].rank,"."),r.a.createElement("div",null,r.a.createElement(N.s,{required:"true",label:"Entry ID",margin:"dense",className:"entryFormText",value:this.state.idAndTitle,onChange:this.handleChange("id")}),r.a.createElement(N.s,{disabled:!0,label:"Title",margin:"dense",className:"entryFormText",value:this.state.title})),r.a.createElement(Ke.a,{className:"removeCircleOutlineIcon",color:"primary",id:"entryIcon",onClick:this.delEntry})):this.state.show&&!this.state.duplicate?r.a.createElement("div",{className:"addEntry"},r.a.createElement("br",null),r.a.createElement("label",{className:"rankingLabel",id:this.props.index},this.props.entriesInVote[this.props.index].rank,"."),r.a.createElement("div",null,r.a.createElement(N.s,{error:!0,required:"true",label:"Entry ID",margin:"dense",className:"entryFormText",value:this.state.idAndTitle,onChange:this.handleChange("id")}),r.a.createElement(N.s,{disabled:!0,label:" ",margin:"dense",className:"entryFormText",value:"Enter a Valid Entry ID"})),r.a.createElement(Ke.a,{className:"removeCircleOutlineIcon",color:"primary",id:"entryIcon",onClick:this.delEntry})):this.state.show&&this.state.duplicate?r.a.createElement("div",{className:"addEntry"},r.a.createElement("br",null),r.a.createElement("label",{className:"rankingLabel"},this.props.entriesInVote[this.props.index].rank,"."),r.a.createElement("div",null,r.a.createElement(N.s,{error:!0,required:"true",label:"Entry ID",margin:"dense",className:"entryFormText",value:this.state.idAndTitle,onChange:this.handleChange("id")}),r.a.createElement(N.s,{disabled:!0,label:" ",margin:"dense",className:"entryFormText",value:"Duplicate Entry ID"})),r.a.createElement(Ke.a,{className:"removeCircleOutlineIcon",color:"primary",id:"entryIcon",onClick:this.delEntry})):null}}]),t}(r.a.Component);function Ot(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var kt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,entries:[],voteID:""},n.addEntry=function(){for(var e=0,t=0;t<n.state.entries.length;t++){n.state.entries[t].show&&e++}e++;var a=n.state.entries.slice();a.push({show:!0,id:"",rank:e}),n.setState({entries:a})},n.submitVote=function(){for(var e=!1,t=0,a=0;a<n.state.entries.length;a++){var r=n.state.entries[a];r.show&&(!r.duplicate&&r.valid||(e=!0),t++)}if(!e&&t>0){var l=J.a.database().ref("event/".concat(n.props.event.id,"/ballots"));l.once("value",function(e){var t=e.child("count").val();""!==t&&null!==t||(t=0),t+=1,n.setState({voteID:t}),l.child("count").set(n.state.voteID);for(var a=0;a<n.state.entries.length;a++){var r=n.state.entries[a];if(r.show)J.a.database().ref("event/".concat(n.props.event.id,"/ballots/manual/vote").concat(n.state.voteID)).child(r.id).set(r.rank)}n.setState({entries:[]}),n.handleClose()})}},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({entries:[]}),n.setState({open:!1})},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"updateEntry",value:function(e,t){var n=this.state.entries;if(n[t]=e,!this.state.entries[t].show)for(var a=t+1;a<this.state.entries.length;a++)n[a].show&&(n[a].rank-=1);this.setState({entries:n})}},{key:"render",value:function(){var e=this,t=this.state.entries;return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:Ot,onClose:this.handleClose},r.a.createElement(N.h,null," Add Vote "),r.a.createElement(N.g,null,"Click the circle-add button to fill in each entry.",r.a.createElement("br",null),r.a.createElement("form",{className:"addEntryForm",onSubmit:this.submitVote},t.map(function(n,a){return r.a.createElement("div",{key:a},r.a.createElement(Ct,{event:e.props.event,googleId:e.props.googleId,entriesInVote:t,updateEntry:function(t,n){return e.updateEntry(t,n)},index:a}))}),r.a.createElement("br",null),r.a.createElement(le.a,{color:"primary",id:"entryIcon",onClick:this.addEntry}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",className:"buttons",type:"button",onClick:this.handleClose},"Cancel"),"  ",r.a.createElement(N.a,{type:"submit",variant:"contained",color:"primary",className:"buttons"},"Submit")))))}}]),t}(r.a.Component);function jt(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var Dt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleOpen=function(e){n.setState({open:!0,message:e})},n.handleClose=function(){n.setState({open:!1,message:""})},n.state={open:!1,message:""},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.open?r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:jt,onClose:this.handleClose},r.a.createElement(N.h,null," Error "),r.a.createElement(N.g,null,"Error message received:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,this.state.message),r.a.createElement("br",null),r.a.createElement("br",null),"You may want to double check the URL you posted for correctness and format."),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose,color:"default"},"Close")))):null}}]),t}(r.a.Component);function It(e){return r.a.createElement(N.q,Object.assign({direction:"up"},e))}var wt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.handleConfirm=function(){n.setState({open:!1}),n.props.handler()},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.e,{open:this.state.open,TransitionComponent:It,onClose:this.handleClose},r.a.createElement(N.h,null,"Finalize Results"),r.a.createElement(N.g,null,'Finalizing results will send all ballots (including manually entered and unsubmitted ballots) to the linked google sheet as well as close the event voting if it is currently open. If you only wanted to sync submitted entries, please cancel this dialog and choose the "Sync Entries" option.',r.a.createElement("br",null),"Are you sure you want to finalize results?"),r.a.createElement(N.f,null,r.a.createElement(N.a,{onClick:this.handleClose},"Go Back"),r.a.createElement(N.a,{onClick:this.handleConfirm,color:"primary"},"Confirm"))))}}]),t}(r.a.Component),St=Y()("http://localhost:5000"),Vt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleExport=function(){n.exportChild.current.handleOpen()},n.handleOpenEntries=function(){n.setState({view:"entries",event:n.state.event})},n.handleAddEntry=function(){n.addChild.current.handleOpen()},n.handleEventEdit=function(){n.eventChild.current.handleOpen()},n.handleOpenCloseVoting=function(){n.votingChild.current.handleOpen()},n.handleWeights=function(){n.weightsChild.current.handleOpen()},n.handleError=function(e){n.errorChild.current.handleOpen(e)},n.handleAddVote=function(){n.addVoteChild.current.handleOpen()},n.goBack=function(){"main"===n.state.view||"results"===n.state.view?n.props.handler(n.props.orgViews.MAIN):"entries"===n.state.view&&n.setState({view:"main",event:n.state.event})},n.viewResults=function(){n.setState({view:"results"})},n.manageEvent=function(){n.setState({view:"main"})},n.finalizeConfirm=function(){n.finalizeChild.current.handleOpen()},n.finalizeResults=function(){St.emit("finalize_results",{googleId:n.props.user.googleId,eventId:n.state.event.id})},n.handleURLChange=function(e){e.preventDefault();var t=n.state.event;t.sheetURL=e.target.value,n.setState({view:n.state.view,event:t})},n.handleSubmit=function(e){e.preventDefault(),St.emit("send_url",{url:n.state.event.sheetURL,googleId:n.props.user.googleId,eventId:n.state.event.id})},n.sendEntries=function(){St.emit("send_entries",{googleId:n.props.user.googleId,eventId:n.state.event.id,entries:n.state.event.entries})},n.state={view:"main",event:{id:"",name:"",location:"",startDate:"",endDate:"",automate:!1,startVote:"",endVote:"",sheetURL:"Google Sheet URL",entries:[]}},n.exportChild=r.a.createRef(),n.eventChild=r.a.createRef(),n.entryChild=r.a.createRef(),n.addChild=r.a.createRef(),n.votingChild=r.a.createRef(),n.weightsChild=r.a.createRef(),n.addVoteChild=r.a.createRef(),n.errorChild=r.a.createRef(),n.finalizeChild=r.a.createRef(),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user.googleId;J.a.database().ref("organizer/".concat(t,"/event")).on("value",function(t){var n=t.val();if(n&&n[e.props.curEvent]){var a=n[e.props.curEvent].eventData,r=n[e.props.curEvent].entries;e.setState({view:e.state.view,event:{id:a.id,name:a.name,location:a.location,startDate:a.startDate,endDate:a.endDate,automate:a.automate,startVote:a.startVote,endVote:a.endVote,sheetURL:a.sheetURL,entries:r}})}}),St.on("error",function(t){console.log(t.error),e.handleError(t.error)})}},{key:"componentWillUnmount",value:function(){St.removeListener("error")}},{key:"handleEntryEdit",value:function(e){this.entryChild.current.handleOpen(e)}},{key:"keyPress",value:function(e){"Enter"===e.key&&this.handleSubmit()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"main"},null!=this.props.user&&r.a.createElement("div",null,r.a.createElement(ct,{ref:this.exportChild,event:this.state.event}),r.a.createElement(dt,{ref:this.entryChild,event:this.state.event,googleId:this.props.user.googleId}),r.a.createElement(wt,{ref:this.finalizeChild,handler:this.finalizeResults}),r.a.createElement(ft,{ref:this.addChild,event:this.state.event,googleId:this.props.user.googleId}),r.a.createElement(mt,{ref:this.eventChild,event:this.state.event,googleId:this.props.user.googleId,handler:this.props.handler,orgViews:this.props.orgViews}),r.a.createElement(kt,{ref:this.addVoteChild,event:this.state.event,googleId:this.props.user.googleId}),r.a.createElement(vt,{ref:this.votingChild,event:this.state.event,googleId:this.props.user.googleId}),r.a.createElement(yt,{ref:this.weightsChild,event:this.state.event,googleId:this.props.user.googleId}),r.a.createElement(Dt,{ref:this.errorChild,event:this.state.event,googleId:this.props.googleID}),r.a.createElement(N.t,{variant:"h3",align:"center",gutterBottom:!0},this.state.event.name)),"main"===this.state.view&&r.a.createElement("div",null,r.a.createElement("div",{className:"options"},r.a.createElement(N.a,{className:"button1",variant:"contained",color:"primary",onClick:this.manageEvent},"Manage Event"),r.a.createElement(N.a,{className:"button1",variant:"contained",onClick:this.viewResults},"View Results")),r.a.createElement("div",{className:"box"},r.a.createElement(N.a,{className:"listButtons",onClick:this.handleExport},"Export Event & Entry QR Codes"),r.a.createElement(N.a,{className:"listButtons",onClick:this.handleOpenEntries},"View/Add/Edit Entries"),r.a.createElement(N.a,{className:"listButtons",onClick:this.handleEventEdit},"View/Edit Event Details"),r.a.createElement(N.a,{className:"listButtons",onClick:this.handleOpenCloseVoting},"Open/Close Voting"))),"entries"===this.state.view&&void 0!==this.state.event.entries&&r.a.createElement("div",null,r.a.createElement("div",{className:"options"},r.a.createElement(N.a,{className:"button1",variant:"contained",color:"primary",onClick:this.manageEvent},"Manage Event"),r.a.createElement(N.a,{className:"button1",variant:"contained",onClick:this.viewResults},"View Results")),r.a.createElement("div",{className:"box"},Object.values(this.state.event.entries).map(function(t,n){return r.a.createElement(N.a,{key:n,className:"listButtons",onClick:function(){return e.handleEntryEdit(t.id)}},t.title," by ",t.presenters)}),r.a.createElement(N.a,{className:"listButtons",color:"primary",onClick:this.handleAddEntry},"Add New Entry"))),"entries"===this.state.view&&void 0===this.state.event.entries&&r.a.createElement("div",null,r.a.createElement("div",{className:"options"},r.a.createElement(N.a,{className:"button1",variant:"contained",color:"primary",onClick:this.manageEvent},"Manage Event"),r.a.createElement(N.a,{className:"button1",variant:"contained",onClick:this.viewResults},"View Results")),r.a.createElement("div",{className:"box"},r.a.createElement(N.a,{className:"listButtons",color:"primary",onClick:this.handleAddEntry},"Add New Entry"))),"results"===this.state.view&&r.a.createElement("div",{className:"viewResults"},r.a.createElement("div",{className:"options"},r.a.createElement(N.a,{className:"button1",variant:"contained",onClick:this.manageEvent},"Manage Event"),r.a.createElement(N.a,{className:"button1",variant:"contained",color:"primary",onClick:this.viewResults},"View Results")),r.a.createElement("br",null),r.a.createElement("div",{className:"saveItems"},r.a.createElement("div",{className:"sheetsExport"},r.a.createElement(N.t,{variant:"h5"},"Set up Google Sheets to export results:"),r.a.createElement("br",null),r.a.createElement("div",{className:"instructions"},r.a.createElement("div",null,"1. Create a Google Sheet in your desired location"),r.a.createElement("div",null,"2. Share the spreadsheet with editing rights with:",r.a.createElement("br",null),r.a.createElement("div",{className:"main"},r.a.createElement("b",null,"talli-455@talli-229017.iam.gserviceaccount.com"))),r.a.createElement("div",null,"3. Grab the spreadsheet's URL and paste it here:",r.a.createElement("div",{className:"main"},r.a.createElement(N.s,{id:"standard-dense",label:"Spreadsheet URL",margin:"dense",className:"sheetURL",value:this.state.event.sheetURL,onKeyDown:this.keyPress,onChange:this.handleURLChange}),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",size:"small",color:"default",onClick:this.handleSubmit},"Submit"))))),r.a.createElement("div",{className:"manualBallots"},r.a.createElement(N.t,{variant:"h5"},"Add paper ballot(s) manually into system:"),r.a.createElement("br",null),r.a.createElement("div",{className:"addVoteBox"},r.a.createElement(N.a,{className:"listButtons",onClick:this.handleAddVote},"Add Vote")),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(N.t,{variant:"h5"},"Results Controls:"),r.a.createElement(N.a,{variant:"contained",className:"buttons weights",type:"button",onClick:this.handleWeights},"Apply Custom Weights"),r.a.createElement(N.a,{variant:"contained",className:"buttons",type:"button",onClick:this.sendEntries},"Sync entries"),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",className:"buttons",color:"primary",type:"button",onClick:this.finalizeConfirm},"Finalize Results"))))),r.a.createElement("br",null),r.a.createElement(N.a,{variant:"contained",className:"buttons",type:"button",onClick:this.goBack},"Back"))}}]),t}(r.a.Component),Nt={MAIN:"EventList",CREATE:"NewEvent",ADD:"AddEntry",VIEW:"ViewEvent"},Tt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={curView:Nt.MAIN,curEventID:""},n.setView=n.setView.bind(Object(ee.a)(Object(ee.a)(n))),n.setEvent=n.setEvent.bind(Object(ee.a)(Object(ee.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"ChangeView",value:function(e){Object(x.navigate)(e)}},{key:"setView",value:function(e){this.setState({curView:e})}},{key:"setEvent",value:function(e){this.setState({curEventID:e})}},{key:"logout",value:function(){this.ChangeView("/"),this.props.logout()}},{key:"getCurrView",value:function(){switch(this.state.curView){case Nt.CREATE:return r.a.createElement(He,{orgViews:Nt,handler:this.setView,setEvent:this.setEvent,user:this.props.user});case Nt.ADD:return r.a.createElement(nt,{orgViews:Nt,handler:this.setView,curEvent:this.state.curEventID,user:this.props.user});case Nt.VIEW:return r.a.createElement(Vt,{orgViews:Nt,handler:this.setView,curEvent:this.state.curEventID,user:this.props.user});default:return r.a.createElement(Je,{orgViews:Nt,handler:this.setView,setEvent:this.setEvent,user:this.props.user})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"content"},r.a.createElement(N.a,{variant:"contained",color:"secondary",className:"buttons",onClick:this.logout.bind(this)},"Logout"),r.a.createElement("div",null,this.getCurrView()))}}]),t}(r.a.Component),At=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).gaveConsent=function(){return""!==F("TalliConsent")},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"ChangeView",value:function(e){Object(x.navigate)(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"cookieInfo"},r.a.createElement(N.t,{variant:"h4",gutterBottom:!0},"Cookies"),r.a.createElement(N.t,{variant:"h5"},"What are cookies?"),r.a.createElement(N.t,{variant:"body2"},"A cookie is a small text file that a website saves on your computer or mobile device when you visit the site. It enables the website to remember your actions and preferences (such as login, language, font size and other display preferences) over a period of time, so you don\u2019t have to keep re-entering them whenever you come back to the site or browse from one page to another."),r.a.createElement("br",null),r.a.createElement(N.t,{variant:"h5"},"How do we use cookies?"),r.a.createElement(N.t,{variant:"body2"},"On this website, we use cookies to identify unique event attendees. This helps keep voting on our platform accurate and fair by allowing each visitor only one ballot submission per event. Upon join an event for the first time with our application, a unique ID is generated for your browser and stored to identify you without needing to collect any additional information like name or email address. In current and future sessions, we will use that cookie to identify you to allow you to return to an in-progress ballot and to prevent you from submitting a ballot for an event more than once."),r.a.createElement("br",null),r.a.createElement(N.t,{variant:"h5"},"How to control cookies"),r.a.createElement(N.t,{variant:"body2"},"You can control and/or delete cookies as you wish \u2013 for details, see aboutcookies.org. You can delete all cookies that are already on your computer and you can set most browsers to prevent them from being placed. If you do this, however, you will not be allowed to vote using our platform and will need to contact an event organizer for an alternate mode of voting.",r.a.createElement("br",null),r.a.createElement("br",null),'If you consent to the usage of cookies by this site, please select "Got It!" on the banner below if you have not already. Please note that you ',r.a.createElement("b",null,"cannot")," use the voting features on this application without consenting to cookie usage."),!this.gaveConsent()&&r.a.createElement(K,{nav:this.ChangeView}))}}]),t}(r.a.Component),xt=n(37).RouterMixin,Rt=W()({displayName:"RoutedApp",getInitialState:function(){return{loggedIn:this.props.loggedIn}},mixins:[xt],routes:{"/":"home","/vote":"vote","/vote/:text":"voteWithID","/organizer":"organizer","/cookies":"cookies"},render:function(){return this.renderCurrentRoute()},home:function(){return r.a.createElement(X,{loggedIn:this.props.loggedIn,onSuccess:this.onSuccess})},vote:function(){return r.a.createElement(Me,null)},voteWithID:function(e){return r.a.createElement(Me,null)},organizer:function(){return r.a.createElement(Tt,{logout:this.logout,user:this.props.user})},cookies:function(){return r.a.createElement(At,null)},notFound:function(e){return r.a.createElement("div",{className:"not-found"},"Page Not Found: ",e)},onSuccess:function(e){this.props.onSuccess(e)},logout:function(){this.props.logout()}}),Ft=(n(628),function(e){function t(){var e;Object(i.a)(this,t),e=Object(c.a)(this,Object(u.a)(t).call(this));var n=sessionStorage.getItem("id")?{googleId:sessionStorage.getItem("id"),email:sessionStorage.getItem("email"),name:sessionStorage.getItem("name")}:null;return e.state={loggedIn:!!n,user:n},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(M.MuiThemeProvider,{theme:G},r.a.createElement("div",null,r.a.createElement(L,{loggedIn:this.state.loggedIn,onSuccess:this.onSuccess.bind(this),logout:this.logout.bind(this)}),r.a.createElement(Rt,{onSuccess:this.onSuccess.bind(this),logout:this.logout.bind(this),user:this.state.user})))}},{key:"onSuccess",value:function(e){this.setState({loggedIn:!0,user:{googleId:e.googleId,email:e.profileObj.email,name:e.profileObj.givenName}}),sessionStorage.setItem("id",e.googleId),sessionStorage.setItem("email",e.profileObj.email),sessionStorage.setItem("name",e.profileObj.givenName);var t={email:e.profileObj.email,name:e.profileObj.name};J.a.database().ref("organizer/"+e.profileObj.googleId+"/organizerData").set(t)}},{key:"logout",value:function(){this.setState({loggedIn:!1,user:null}),sessionStorage.removeItem("id"),sessionStorage.removeItem("email"),sessionStorage.removeItem("name")}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ft,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t,n){}},[[331,1,2]]]);
//# sourceMappingURL=main.5727e166.chunk.js.map